var arianeWire = {
	
	target: null,
	html: null,
	
	init: function() {
		$.ajax({
			url: 'http://localhost:3000/user/document/arianewire',
			type:"GET",
			dataType: "json",
			data: {
				box_id: $('#breadcrumb').attr('folder_id')
			},
			complete: function(data) {
				console.log(Date.now());
				localStorage.setItem('arianeWire', JSON.stringify(JSON.parse(data['responseText'])));
				console.log(Date.now());
			}
		});
	},
	
	displayHtml: function() {
		var arianeWire = JSON.parse(localStorage.getItem('arianeWire'));
		// $('#breadcrumb').append(JSON.parse(arianeWire)[0]['name'])
		for (key in arianeWire) {
			if (arianeWire.hasOwnProperty(key)) {
				$('#breadcrumb').append(' > <a class="name-document" href="/user/documents?folder=' + arianeWire[key]['id'] + '">' + arianeWire[key]['name'] + '</a>')
			}
		}
	}
};






  def index
    req_params = { 
      fields: "id,name,created_at,modified_at,size,type"
    }
    
    box_content_resources[:basic]["folders/#{params[:folder]}/items"].get(params: req_params) { |response, request, result, &block|
      check_request_success(response, "index")
      @folder_name = JSON.parse(response)['name']
      @documents = []
      JSON.parse(response)['entries'].each do |file|
        @documents << file
      end
    }
  end
	
  def ariane_wire
    @ariane_wire = {}
    @parent_id = params[:box_id]
    @i = 0
    until @parent_id == '0'
      box_content_resources[:basic]["folders/#{@parent_id}"].get() { |response, request, result, &block|
        check_request_success(response, "create ariane")
        @parent_id = JSON.parse(response)['parent']['id'] if JSON.parse(response)['parent']
        @ariane_wire[@i] = { name: JSON.parse(response)['name'], id: JSON.parse(response)['id'] }
        @i+=1
      }
    end
    
    respond_to do |format|
      format.html { render json: @ariane_wire }
      format.json { render json: @ariane_wire }
    end
  end